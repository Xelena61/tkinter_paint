<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Рисовалка</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            display: flex;
            flex-direction: column;
            aling-items: center;
        }

        .toolbar {
            margin-bottom: 10px;
        }

        canvas {
            border: 1px solid #666;
            background: #ffffff;
        }
    </style>
</head>
    <body>
        <div class="toolbar">
            <label>
                Цвет:
                <input type="color" id="colorPicker" value="#000000">
            </label>
            <label>
                Толщина:
                <input type="range" id="brushSize" min="1" max="40" value="4">
                <span id="brushSizeLabel">4 px</span>
            </label>

            <label>
                Инструменты:
                <select id="tool">
                    <option value="pensil">Карандаш</option>
                    <option value="marker">Маркер</option>
                    <option value="calligraphy">Каллиграфия</option>
                    <option value="spray">Аэрограф</option>
                    <option value="erase">Ластик</option>
                </select>
            </label>
            <button id="clear">Очистить</button>
            <button id="save">Сохранить PNG</button>
        </div>

        <canvas id="paint" width="400" height="200"></canvas>
       <script>
const canvas = document.getElementById('paint');
const ctx = canvas.getContext('2d');

const colorPicker = document.getElementById('colorPicker');
const brushSize = document.getElementById('brushSize');
const brushSizeLabel = document.getElementById('brushSizeLabel');
const clearBtn = document.getElementById('clear');
const saveBtn = document.getElementById('save');
const toolSelect = document.getElementById('tool');

let drawing = false;

// --- запуск рисования ---
function startDrawing(e) {
    drawing = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
}

// --- остановка рисования ---
function stopDrawing() {
    drawing = false;
    ctx.beginPath();
}

// --- рисуем линию под курсором ---
function draw(e) {
    if (!drawing) return;

    const size = Number(brushSize.value);
    const tool = toolSelect.value;

    ctx.lineWidth = size;
    ctx.lineCap = "round";
    ctx.lineJoin = "round";

    // базовый цвет
    ctx.strokeStyle = colorPicker.value;
    ctx.globalAlpha = 1;

    // маркер — полупрозрачный
    if (tool === "marker") {
        ctx.globalAlpha = 0.4;
    }

    // каллиграфическая — другие концы линий
    if (tool === "calligraphy") {
        ctx.lineCap = "butt";
        ctx.lineJoin = "miter";
    }

    // ластик — рисуем цветом фона
    if (tool === "erase") {
        ctx.strokeStyle = "#ffffff";
    }

    // аэрограф — отдельная логика
    if (tool === "spray") {
        const dots = 25;
        for (let i = 0; i < dots; i++) {
            const angle = Math.random() * 2 * Math.PI;
            const radius = Math.random() * size;
            const x = e.offsetX + Math.cos(angle) * radius;
            const y = e.offsetY + Math.sin(angle) * radius;
            ctx.fillStyle = ctx.strokeStyle;
            ctx.globalAlpha = 0.6;
            ctx.fillRect(x, y, 1, 1);
        }
        ctx.globalAlpha = 1;
        return;
    }

    // обычная линия (карандаш, маркер, каллиграфия, ластик)
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
}

// --- очистка холста ---
function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#ffffff";  // белый фон, чтобы PNG не был прозрачный
    ctx.fillRect(0, 0, canvas.width, canvas.height);
}

// --- сохранение в PNG ---
function savePNG() {
    const link = document.createElement('a');
    link.href = canvas.toDataURL('image/png');
    link.download = 'my_drawing.png';
    link.click();
}

// начальная заливка белым
clearCanvas();

// события мыши
canvas.addEventListener('mousedown', startDrawing);
canvas.addEventListener('mouseup', stopDrawing);
canvas.addEventListener('mouseleave', stopDrawing);
canvas.addEventListener('mousemove', draw);

// обновляем надпись толщины
brushSize.addEventListener('input', () => {
    brushSizeLabel.textContent = brushSize.value + ' px';
});

// кнопки
clearBtn.addEventListener('click', clearCanvas);
saveBtn.addEventListener('click', savePNG);</script>
    </body>
    </html>
